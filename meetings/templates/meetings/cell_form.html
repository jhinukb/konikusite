{% extends 'base.html' %}
{% comment %}

This is the display for the 'Post Ad' form.

URL: cell_form/
Model: Cell
ModelForm: CellForm
View: CellFormPage [FormView]
View Return: HttpResponse : message - "Sweeeeeeeet."

* = preset when user is logged in.

{% endcomment %}

{% block content %}

<style>
  #next {
    background-color: indigo; /* Green */
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 20px;
  }
  #t {
    font-size: 20px;
  }

</style>
<a href="{% url 'cell_form' %}" class="top-menu"><span class="glyphicon glyphicon-plus"></span></a>
<form method="post" id="cellForm" data-members-url="{% url 'ajax_load_members' %}" novalidate>
{% csrf_token %}
    <!-- *name -->
    {{  form.non_field_errors }}
    <div class="fieldWrapper">
        {{ form.cell.errors }}
        <label for="id_name" id='cell_name'></label>
          <table id='t'>
            {{ form.as_table }}
          </table>
    </div>
    <!-- <div>
      <label for='checkbox'>Attendee List:</label>
      <table id='checkbox'>
        {{ form.member }}
      </table>
    </div> -->
    <button type="submit" id='next'>
      <label>Next</label>
        <i class="fa fa-thumb-tack"></i>
    </button>

</form>


<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
  $("#id_cell").change(function () {
    var url = $("#cellForm").attr('data-members-url');  // get the url of the `load_members` view
    var cellID = $(this).val();  // get the selected cell ID from the HTML input

    $.ajax({                       // initialize an AJAX request
      url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-members/)
      data: {
        'cell': cellID       // add the cell id to the GET parameters
      },
      success: function (data) {   // `data` is the return of the `load_members` view function
        $("#id_member").html(data);  // replace the contents of the member input with the data that came from the server
      }
    });

  });
</script>
{% endblock %}
